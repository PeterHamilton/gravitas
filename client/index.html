<!DOCTYPE html>
<html>
  <head>
    <title>Gravitas</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <script type="text/javascript" src="js/lib/coffee-script.js"></script>
    <script type="text/javascript" src="js/lib/raphael.js"></script>
    <script type="text/javascript" src="js/lib/g.raphael.js"></script>
    <script type="text/javascript" src="js/lib/g.pie.js"></script>
    <script type="text/javascript" src="js/lib/g.line.js"></script>
    <script type="text/javascript" src="http://www.exratione.com/assets/date.format.1.2.3.min.js"></script>


    <script type="text/javascript" src="js/lib/jquery.js"></script>
    <script type="text/javascript" src="js/lib/jquery.cookie.js"></script>
    <script type='text/javascript' src='js/lib/knockout.js'></script>
    <script type='text/javascript' src="js/lib/sonic.js"></script>

    <script type='text/coffeescript' src='js/ko-extras.coffee'></script>

    <script type="text/coffeescript" src="js/config.coffee"></script>
    <script type="text/coffeescript" src="js/crosshair.coffee"></script>
    <script type="text/coffeescript" src="js/countdown_timer.coffee"></script>
    <script type="text/coffeescript" src="js/shield_powerup_view.coffee"></script>
    <script type="text/coffeescript" src="js/turret.coffee"></script>
    <script type="text/coffeescript" src="js/arena.coffee"></script>
    <script type="text/coffeescript" src="js/statistics.coffee"></script>
    <script type="text/coffeescript" src="js/game.coffee"></script>
    <script type="text/coffeescript" src="js/ball_view.coffee"></script>
    <script type="text/coffeescript" src="js/vortex.coffee"></script>
    <script type="text/coffeescript" src="main.coffee"></script>


  </head>

  <body>

    <div id="login-overlay" class="screen" data-bind="fadeVisible: !gameStarted()">

      <div class="centered-table" data-bind="fadeVisible: !loggedIn()">
        <div class="centered-table-cell">

      <!-- Login window -->
          <div id="login-window" class="box">
            <form>
              <div class="logo"></div>
              <p>
                <label for="userName">Username</label>
                <input id="userName" type="text" name="userName" maxlength="32" tabindex="1" data-bind="value: username, event: { keypress: resetAuthStatus }, hasfocus: true" />
              </p>

              <p>
                <label for="password">Password</label>
                <input type="password" id="password" name="password" tabindex="2" data-bind="value: password, event: { keypress: resetAuthStatus }" />
              </p>

              <input type="submit" data-bind="click: logIn, value: logInButtonText, css: { error: authFailed }" />
            </form>
          </div>

        </div>
      </div>

      <!-- Lobby window -->
      <div class="centered-table" data-bind="fadeVisible: !gameStarted() && loggedIn() && !assembly() ">
        <div class="centered-table-cell">

          <div id="lobby-window" class="box">
            <div class="logo left"></div>
            <div id="nick">
              <span data-bind="text: username" placeholder="Username"></span>
              <span id="rating" data-bind="style: { color: userRatingColor() }, text: userRating()">
              </span><br>
              <div id="navigation">
                <a href="#" class="glow" data-bind="click: assemblyGoTo1">A</a>
                <a href="#" class="glow" data-bind="click: assemblyGoTo2">C</a>
                <a href="#" class="glow" data-bind="click: assemblyGoTo3">v</a>
                <a href="#" class="glow" data-bind="click: assemblyGoTo4">s</a>
              </div>
            </div>
            <br />
            <div id="lobby-content" data-bind="visible: assemblyContent() == 1">
             <label class="large">Profile</label><br />
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

            </div>

            <div id="lobby-content" data-bind="visible: assemblyContent() == 2">
             <label class="large">Settings</label><br />

              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

            </div>

            <div id="lobby-content" data-bind="visible: assemblyContent() == 3">
             <label class="large">Statistics</label><br />

              <table>
                  <tbody>
                      <tr>
                          <td><b>Best Score:</b></td>
                          <td>999</td>

                      </tr>
                      <tr>
                          <td><b>Games Played:</b></td>
                          <td>123</td>
                      </tr>
                      <tr>
                          <td><b>Time Played:</b></td>
                          <td>13h 19mins</td>
                      </tr>
                      <tr>
                          <td><b>Win Ratio:</b></td>
                      </tr>
                  </tbody>
              </table>
              <div id="paperStats"></div>
            </div>

            <div id="lobby-content" data-bind="visible: assemblyContent() == 4">
             <label class="large">Achievements</label><br />

              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

            </div>

              <div id="buttons">
              <button id="playbutton" data-bind="click: assemblyClick">
                Play
              </button>
            </div>


        </div>
      </div>

    </div>

    <!-- Assembly Div -->

      <div class="centered-table" data-bind="fadeVisible: !gameStarted() && loggedIn() && assembly()">
        <div class="centered-table-cell">

          <div id="assembly-window" class="box">
            <div class="logo left"></div>
             <div id="nick">
               <span data-bind="text: username" placeholder="Username"></span>
               <span id="rating" data-bind="style: { color: userRatingColor() }, text: userRating()">
             </div>
            <br />
            <div id="spinner" class="spinner"></div><div id="spinner-label">Waiting for four other players</div>
            <div id="assembly-content">

              <table>
                <thead>
                  <tr>
                    <th>Username</th>
                    <th>Rating</th>
                  </tr>
                </thead>
                <tbody data-bind="foreach: connectedPlayers">
                  <tr>
                    <td><span data-bind="text: username"></span></td>
                    <td><span data-bind="text: rating"></span></td>
                  </tr>
                </tbody>
              </table>
              <br />
               <label>Total connected: <label data-bind="text: connectedPlayers().length"></label></label><br />
            </div>



            <div id="buttons">


<!--          <button data-bind="click: connectNew">
                Add a player
              </button>

              <button data-bind="click: pingServer">
                Ping Server
              </button>
 -->

               <button data-bind="click: assemblyExitClick">
                 Leave
               </button>

               <button data-bind="click: startGame">
                 Start
               </button>
 <!--              <button id="leavebutton" data-bind="click: assemblyExitClick">
                Leave
              </button>

              <button id="startbutton" data-bind="click: startGame">
                Start
              </button>
  -->           </div>

          </div>

        </div>
      </div>

    </div>

    <div id="game" class="screen">

      <div class="centered-table">
        <div class="centered-table-cell">
          <div id="paper"></div>
        </div>
      </div>

      <div id="controls">

        <div class="divlabel">dev</div>

        <p id="lag_indicator" data-bind="css: { lag: lag }">Lag indicator</p>

        <p>
          <input id="toggleLogin" type="checkbox" data-bind="checked: autoLogIn" />Logged in
        </p>


        <p>
          <input id="toggleGameStarted" type="checkbox" data-bind="checked: autoStart" />Game Started
        </p>

        <p>
          Player:
          <input type="radio" class="player" name="player" value="0" data-bind="checked: player" checked="checked" />0
          <input type="radio" class="player" name="player" value="1" data-bind="checked: player" />1
          <input type="radio" class="player" name="player" value="2" data-bind="checked: player" />2
          <input type="radio" class="player" name="player" value="3" data-bind="checked: player" />3
        </p>

        <div id="log_container">

          <form id="chatform">
            <input type="text" id="chatinput" />
          </form>

          <h4>Log:</h4>
          <div id="log"></div>
        </div>

      </div>

    </div>
     <!-- Awesome triangle spinners -->
    <script>

      var spinner1 = new Sonic({
          width: 18,
          height: 18,

          stepsPerFrame: 3,
          trailLength: .7,
          pointDistance: .02,
          fps: 30,

          step: 'fader',

          setup: function() {
              this._.lineWidth = 3;
          },

          path: [
            ['line', 1, 17, 8, 5],
            ['line', 8, 5, 16, 17],
            ['line', 16, 17, 1, 17]
          ]
      });

      var spinner2 = new Sonic({
          width: 18,
          height: 18,

          stepsPerFrame: 3,
          trailLength: .7,
          pointDistance: .02,
          fps: 30,

          step: 'fader',

          setup: function() {
              this._.lineWidth = 3;
          },

          path: [
            ['line', 1, 5, 8, 17],
            ['line', 8, 17, 16, 5],
            ['line', 16, 5, 1, 5]
          ]
      });


      $(function(){
        spinner1.play();
        spinner2.play();

        $('.spinner').append(spinner1.canvas);
        $('.spinner').append(spinner2.canvas);
      });
    </script>

  </body>

</html>
