<!DOCTYPE html>
<html>
  <head>
    <title>Gravitas</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <script type="text/javascript" src="js/lib/coffee-script.js"></script>
    <script type="text/javascript" src="js/lib/raphael.js"></script>
    <script type="text/javascript" src="js/lib/g.raphael.js"></script>
    <script type="text/javascript" src="js/lib/g.pie.js"></script>
    <script type="text/javascript" src="js/lib/g.line.js"></script>
    <script type="text/javascript" src="http://www.exratione.com/assets/date.format.1.2.3.min.js"></script>


    <script type="text/javascript" src="js/lib/jquery.js"></script>
    <script type="text/javascript" src="js/lib/jquery.cookie.js"></script>
    <script type='text/javascript' src='js/lib/knockout.js'></script>
    <script type='text/javascript' src="js/lib/sonic.js"></script>

    <script type='text/coffeescript' src='js/ko-extras.coffee'></script>

    <script type="text/coffeescript" src="js/config.coffee"></script>
    <script type="text/coffeescript" src="js/crosshair.coffee"></script>
    <script type="text/coffeescript" src="js/countdown_timer.coffee"></script>
    <script type="text/coffeescript" src="js/shield_powerup_view.coffee"></script>
    <script type="text/coffeescript" src="js/turret.coffee"></script>
    <script type="text/coffeescript" src="js/arena.coffee"></script>
    <script type="text/coffeescript" src="js/statistics.coffee"></script>
    <script type="text/coffeescript" src="js/game.coffee"></script>
    <script type="text/coffeescript" src="js/ball_view.coffee"></script>
    <script type="text/coffeescript" src="js/vortex.coffee"></script>
    <script type="text/coffeescript" src="main.coffee"></script>


  </head>

  <body>

    <div id="login-overlay" class="screen" data-bind="fadeVisible: !gameStarted()">

      <div class="centered-table" data-bind="fadeVisible: !loggedIn()">
        <div class="centered-table-cell">

      <!-- Login window -->
          <div id="login-window" class="box">
            <form>
              <div class="logo"></div>
              <p>
                <label for="userName">Username</label>
                <input id="userName" type="text" name="userName" maxlength="32" tabindex="1" data-bind="value: username, event: { keypress: resetAuthStatus }, hasfocus: true" />
              </p>

              <p>
                <label for="password">Password</label>
                <input type="password" id="password" name="password" tabindex="2" data-bind="value: password, event: { keypress: resetAuthStatus }" />
              </p>

              <input type="submit" data-bind="click: logIn, value: logInButtonText, css: { error: authFailed }" />
            </form>
          </div>

        </div>
      </div>

      <!-- Lobby window -->
      <div class="centered-table" data-bind="fadeVisible: !gameStarted() && loggedIn() && !assembly() ">
        <div class="centered-table-cell">

          <div id="lobby-window" class="box">
            <div class="logo left"></div>
            <div id="nick">
              <span data-bind="text: username" placeholder="Username"></span>
              <span id="rating" data-bind="style: { color: userRatingColor() }, text: userRating()">
              </span><br>
              <div id="navigation">
                <a href="#" class="glow" data-menu="profile" data-bind="click: assemblyGoTo">A</a>
                <a href="#" class="glow" data-menu="settings" data-bind="click: assemblyGoTo">C</a>
                <a href="#" class="glow" data-menu="achievements" data-bind="click: assemblyGoTo">s</a>
                <a href="#" class="glow" data-menu="search" data-bind="click: assemblyGoTo">M</a>
              </div>
            </div>
            <br />
            <div id="lobby-content" data-bind="visible: assemblyContent() == 'settings'">
            <label class="large">Settings</label><br />
            <table>
              <tbody>
                <tr>
                  <td><label class="small">Display Name:</label></td>
                  <td data-bind="text: username"></td>
                </tr>
                <tr>
                  <td><label class="small">Email address:</label></td>
                  <td>user@email.address</td>
                </tr>
                <tr>
                  <td>
                    <br /><label class="large">Profile Picture</label>
                  </td>
                </td>
                <tr>
                  <td><label class="small">Picture URL</label>
                  <td><input class="small" type="text" value="LOAD CURRENT URL" id="pictureURL" tabindex="1"/></td>
                </tr>
               <tr>
                <td>
                  <br /><label class="large">Change Password</label>
                </td>
               </tr>
                <tr>
                  <td><label class="small">Old Password:</label></td>
                  <td><input class="small" type="password" id="oldPassword" tabindex="1"/></td>
                </tr>
                <tr>
                  <td><label class="small">New Password:</label></td>
                  <td><input class="small" type="password" id="oldPassword" tabindex="1"/></td>
                </tr>
                <tr>
                  <td><label class="small">Confirm Password:</label></td>
                  <td><input class="small" type="password" id="oldPassword" tabindex="1"/></td>
                </tr>
              </tbody>
            </table>
            <br />
            <button>
                Save Changes
            </button>

            </div>

            <div id="lobby-content" data-bind="visible: assemblyContent() == 'profile'">
             <label class="large">Profile</label><br />
             <div id="profile-picture"><img src="images/ui/placeholder.jpg" class="profile"></div><div id="profile-stats">
                <table>
                    <tbody>
                        <tr>
                            <td><label class="small">Best Score</label></td>
                            <td>999</td>
                        </tr>
                        <tr>
                            <td><label class="small">Games Played</label></td>
                            <td>123</td>
                        </tr>
                        <tr>
                            <td><label class="small">Time Played</label></td>
                            <td>13h 19mins</td>
                        </tr>
                        <tr>
                            <td><label class="small">Win/Loss Ratio</label></td>
                        </tr>
                    </tbody>
                </table>
                <div id="piePaper"></div>
              </div>
              <div id="chartPaper"></div>
            </div>

            <div id="lobby-content" data-bind="visible: assemblyContent() == 'achievements'">
             <label class="large">Achievements</label><br />

               <table>
                    <tbody>
                        <tr>
                            <td><label class="small">Achievement #1</label></td>
                            <td>Icon</td>
                            <td>Status</td>
                        </tr>
                        <tr>
                            <td><label class="small">Achievement #2</label></td>
                            <td>Icon</td>
                            <td>Status</td>
                        </tr>
                        <tr>
                            <td><label class="small">Achievement #3</label></td>
                            <td>Icon</td>
                            <td>Status</td>
                        </tr>
                        <tr>
                            <td><label class="small">Achievement #4</label></td>
                            <td>Icon</td>
                            <td>Status</td>
                        </tr>
                        <tr>
                            <td><label class="small">Achievement #5</label></td>
                            <td>Icon</td>
                            <td>Status</td>
                        </tr>
                        <tr>
                            <td><label class="small">Achievement #6</label></td>
                            <td>Icon</td>
                            <td>Status</td>
                        </tr>
                    </tbody>
                </table>

            </div>

            <!-- Search Panel -->
            <div id="lobby-content" data-bind="visible: assemblyContent() == 'search'">
             <label class="large">Search</label>
             <br/>
             <span class="caps">Lookup Player:</span> <input class="small" type="text" placeholder="Search..." id="pictureURL" tabindex="1"/></td>
             <div id="search-result">
              <div id="profile-picture"><img src="images/ui/placeholder2.jpg" class="profile"></div><div id="profile-stats">
                 <table>
                     <tbody>
                         <tr>
                             <td><label class="small">Best Score</label></td>
                             <td>999</td>
                         </tr>
                         <tr>
                             <td><label class="small">Games Played</label></td>
                             <td>123</td>
                         </tr>
                         <tr>
                             <td><label class="small">Time Played</label></td>
                             <td>13h 19mins</td>
                         </tr>
                         <tr>
                             <td><label class="small">Win/Loss Ratio</label></td>
                             <td>52:48</td>
                         </tr>
                     </tbody>
                 </table>

               </div>
             </div>

            </div>

              <div id="buttons">
              <button id="playbutton" data-bind="click: assemblyClick">
                Play
              </button>
            </div>


        </div>
      </div>

    </div>

    <!-- Assembly Div -->

      <div class="centered-table" data-bind="fadeVisible: !gameStarted() && loggedIn() && assembly()">
        <div class="centered-table-cell">

          <div id="assembly-window" class="box">
            <div class="logo left"></div>
             <div id="nick">
               <span data-bind="text: username" placeholder="Username"></span>
               <span id="rating" data-bind="style: { color: userRatingColor() }, text: userRating()">
             </div>
            <br />
            <div id="spinner" class="spinner"></div><div id="spinner-label">Waiting for four other players</div>
            <div id="assembly-content">

              <table>
                <thead>
                  <tr>
                    <td><label class="medium">Player</label></td>
                    <td></td>
                    <td><label class="medium">Rating</label></td>
                  </tr>
                </thead>
                <tbody data-bind="foreach: connectedPlayers">
                  <tr>
                    <td><img src="images/ui/placeholder.jpg" class="profile small"></td>
                    <td><span data-bind="text: username"></span></td>
                    <td><span data-bind="text: rating"></span></td>
                  </tr>
                </tbody>
              </table>
              <br />
               <label class="large">Total connected: <label data-bind="text: connectedPlayers().length"></label></label><br />
            </div>


            <div id="buttons">
              <button data-bind="click: connectNew, enable: connectedPlayers().length < 4">
                Add a player (debug)
              </button>

              <button id="leavebutton" data-bind="click: assemblyExitClick">
                Leave
              </button>

              <button id="startbutton" data-bind="click: startGame">
                Start
              </button>
            </div>

          </div>

        </div>
      </div>

    </div>

    <div id="game" class="screen">

      <div class="centered-table">
        <div class="centered-table-cell">
          <div id="paper"></div>
        </div>
      </div>

      <div id="controls">

        <div class="divlabel">dev</div>

        <p id="lag_indicator" data-bind="css: { lag: lag }">Lag indicator</p>

        <p>
          <input id="toggleLogin" type="checkbox" data-bind="checked: autoLogIn" />Logged in
        </p>


        <p>
          <input id="toggleGameStarted" type="checkbox" data-bind="checked: autoStart" />Game Started
        </p>

        <p>
          Player:
          <input type="radio" class="player" name="player" value="0" data-bind="checked: player" checked="checked" />0
          <input type="radio" class="player" name="player" value="1" data-bind="checked: player" />1
          <input type="radio" class="player" name="player" value="2" data-bind="checked: player" />2
          <input type="radio" class="player" name="player" value="3" data-bind="checked: player" />3
        </p>

        <div id="log_container">

          <form id="chatform">
            <input type="text" id="chatinput" />
          </form>

          <h4>Log:</h4>
          <div id="log"></div>
        </div>

      </div>

    </div>
     <!-- Awesome triangle spinners -->
    <script>

      var spinner1 = new Sonic({
          width: 18,
          height: 18,

          stepsPerFrame: 3,
          trailLength: .7,
          pointDistance: .02,
          fps: 30,

          step: 'fader',

          setup: function() {
              this._.lineWidth = 3;
          },

          path: [
            ['line', 1, 17, 8, 5],
            ['line', 8, 5, 16, 17],
            ['line', 16, 17, 1, 17]
          ]
      });

      var spinner2 = new Sonic({
          width: 18,
          height: 18,

          stepsPerFrame: 3,
          trailLength: .7,
          pointDistance: .02,
          fps: 30,

          step: 'fader',

          setup: function() {
              this._.lineWidth = 3;
          },

          path: [
            ['line', 1, 5, 8, 17],
            ['line', 8, 17, 16, 5],
            ['line', 16, 5, 1, 5]
          ]
      });


      $(function(){
        spinner1.play();
        spinner2.play();

        $('.spinner').append(spinner1.canvas);
        $('.spinner').append(spinner2.canvas);
      });
    </script>

  </body>

</html>
